var debounce=function(d,a,b){var e;return function c(){var h=this,g=arguments;function f(){if(!b){d.apply(h,g)}e=null}if(e){clearTimeout(e)}else{if(b){d.apply(h,g)}}e=setTimeout(f,a||100)}};var fuzzyFactor=0.5,pixelRatio=Math.pow((window.devicePixelRatio||1),fuzzyFactor);function Scalable(d){this.el=d;this.versions=[];var e=d.getElementsByTagName("img")[0];this.versions.push({src:e.getAttribute("src"),width:parseInt(e.getAttribute("data-width")),height:parseInt(e.getAttribute("data-height"))});var b=d.querySelectorAll("[data-scalable] a[data-width][data-height]");for(var c=0,a=b.length;c<a;c++){this.versions.push({src:b[c].getAttribute("href"),width:parseInt(b[c].getAttribute("data-width")),height:parseInt(b[c].getAttribute("data-height"))})}}Scalable.prototype.loadImg=function(){var d=this.el.getElementsByTagName("img")[0].clientWidth*pixelRatio;var b=[];for(var c=0,a=this.versions.length;c<a;c++){if(this.versions[c].width>=d){b.push(this.versions[c])}}if(b.length==0){this.currentVersion=this.versions[0];for(var c=1,a=this.versions.length;c<a;c++){if(this.versions[c].width>this.currentVersion.width){this.currentVersion=this.versions[c]}}}else{for(var c=0,a=b.length;c<a;c++){if(c==0||b[c].width<this.currentVersion.width){this.currentVersion=b[c]}}}this.el.getElementsByTagName("img")[0].src=this.currentVersion.src};var scalableEls=document.querySelectorAll("[data-scalable]"),scalables=[];for(var i=0,len=scalableEls.length;i<len;i++){scalables.push(new Scalable(scalableEls[i]))}function loadTheScalables(){for(var b=0,a=scalables.length;b<a;b++){scalables[b].loadImg()}}window.addEventListener("load",loadTheScalables,false);window.addEventListener("resize",debounce(loadTheScalables,200,false),false);window.addEventListener("orientationchange",loadTheScalables,false);