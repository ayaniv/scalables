try{var addEvent=function(){return document.addEventListener?function(g,k,j){if(g&&g.nodeName||g===window){g.addEventListener(k,j,!1)}else{if(g&&g.length){for(var f=0;f<g.length;f++){addEvent(g[f],k,j)}}}}:function(g,k,j){if(g&&g.nodeName||g===window){g.attachEvent("on"+k,function(){return j.call(g,window.event)})}else{if(g&&g.length){for(var f=0;f<g.length;f++){addEvent(g[f],k,j)}}}}}();var debounce=function(d,a,b){var f;return function c(){var k=this,j=arguments;function g(){if(!b){d.apply(k,j)}f=null}if(f){clearTimeout(f)}else{if(b){d.apply(k,j)}}f=setTimeout(g,a||100)}};var fuzzyFactor=0.25,pixelRatio=Math.pow((window.devicePixelRatio||1),fuzzyFactor);function Scalable(d){this.el=d;this.versions=[];var b=d.querySelectorAll("[data-scalable] a[data-width][data-height]");for(var c=0,a=b.length;c<a;c++){this.versions.push({src:b[c].getAttribute("href"),width:parseInt(b[c].getAttribute("data-width")),height:parseInt(b[c].getAttribute("data-height"))})}var f=d.getElementsByTagName("img")[0];this.thumb={src:f.getAttribute("src"),width:parseInt(f.getAttribute("width")),height:parseInt(f.getAttribute("height"))};this.biggest=this.versions[0];for(var c=1,a=this.versions.length;c<a;c++){if(this.versions[c].width>this.biggest.width){this.biggest=this.versions[c]}}}Scalable.prototype.setAvailableDimensions=function(){var a=document.createElement("div");a.style.display="block";a.style.width="9999px";a.style.height="9999px";var b={horizontal:0,vertical:0};if(window.getComputedStyle(this.el,null).getPropertyValue("box-sizing")=="border-box"){b.horizontal=parseInt(window.getComputedStyle(this.el,null).getPropertyValue("padding-left"))+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("padding-right"));b.vertical=parseInt(window.getComputedStyle(this.el,null).getPropertyValue("padding-top"))-parseInt(window.getComputedStyle(this.el,null).getPropertyValue("padding-bottom"))}this.el.appendChild(a);this.available={width:this.el.clientWidth-b.horizontal,height:this.el.clientHeight-b.vertical};this.el.removeChild(a);if(this.biggest.width/this.biggest.height>this.available.width/this.available.height){this.fitWH="width";this.freeWH="height"}else{this.fitWH="height";this.freeWH="width"}return this};Scalable.prototype.sizeImg=function(){var a=this.el.getElementsByTagName("img")[0];a.style[this.fitWH]=this.available[this.fitWH]+"px";a.style[this.freeWH]=this.available[this.fitWH]*(this.biggest[this.freeWH]/this.biggest[this.fitWH])+"px";return this};Scalable.prototype.loadImg=function(){var d=this.available[this.fitWH]*pixelRatio;if(this.thumb[this.fitWH]<d){var b=[];for(var c=0,a=this.versions.length;c<a;c++){if(this.versions[c][this.fitWH]>=d){b.push(this.versions[c])}}if(b.length==0){this.currentVersion=this.biggest}else{for(var c=0,a=b.length;c<a;c++){if(c==0||b[c][this.fitWH]<this.currentVersion[this.fitWH]){this.currentVersion=b[c]}}}}else{this.currentVersion=this.thumb}var j=new Image(),g=this.el.getElementsByTagName("img")[0];for(c=0,attrs=g.attributes,a=attrs.length;c<a;c++){if(attrs[c].nodeName!="src"&&attrs[c].nodeName!="height"&&attrs[c].nodeName!="width"){j.setAttribute(attrs[c].nodeName,attrs[c].nodeValue)}}var f=this;addEvent(j,"load",function(k){f.el.innerHTML="";f.el.appendChild(j);f.el.classList.add("scaled")});j.src=this.currentVersion.src;return this};document.getElementsByTagName("html")[0].className+=" enhanced";var scalableEls=document.querySelectorAll("[data-scalable]"),scalables=[];for(var i=0,len=scalableEls.length;i<len;i++){scalables.push(new Scalable(scalableEls[i]));scalables[i].setAvailableDimensions().sizeImg().loadImg()}function resizeThe(d){for(var b=0,a=d.length;b<a;b++){var c=d[b];c.setAvailableDimensions().sizeImg();if(c.available[c.fitWH]*pixelRatio>c.currentVersion[c.fitWH]){c.loadImg()}}}addEvent(window,"resize",debounce(function(a){resizeThe(scalables)},75,false));addEvent(window,"orientationchange",function(){resizeThe(scalables)})}catch(e){var h=document.getElementsByTagName("html")[0];h.className=h.className.replace(" enhanced","");h.className+=" doh";console.log(e.message)};